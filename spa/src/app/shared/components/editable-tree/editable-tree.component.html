<!-- Дерево категорий -->
<div class="row">
  <div class="col-xl-6 col-sm-12">
    <mat-tree
      [dataSource]="dataSource"
      [treeControl]="treeControl"
      class="tree"
    >
      <!-- This is the tree node template for leaf nodes -->
      <mat-tree-node
        class="node-list"
        *matTreeNodeDef="let node"
        matTreeNodeToggle
        cdkDropList
        (cdkDropListDropped)="drop($event, node.parent.children)"
      >
        <div cdkDrag class="node-box">
          <div class="d-flex align-items-center">
            <mat-icon class="ms-3" mat-list-icon>{{ node.icon }}</mat-icon>
            <div class="mx-3">{{ node.title }}</div>
            <button mat-icon-button (click)="onEditItem(node)">
              <mat-icon mat-list-icon> edit </mat-icon>
            </button>
          </div>
        </div>
      </mat-tree-node>
      <!-- This is the tree node template for expandable nodes -->
      <mat-nested-tree-node
        class="node-list"
        *matTreeNodeDef="let node; when: hasChild"
        cdkDropList
        (cdkDropListDropped)="drop($event, node.parent.children)"
      >
        <div cdkDrag class="node-box">
          <div class="node-box-content">
            <div class="d-flex align-items-center">
              <mat-icon class="ms-3" mat-list-icon>{{ node.icon }}</mat-icon>
              <div class="ms-3">{{ node.title }}</div>
              <button mat-icon-button (click)="onEditItem(node)">
                <mat-icon mat-list-icon> edit </mat-icon>
              </button>
            </div>
            <!-- <div class="flex-grow-1"></div> -->
            <button mat-icon-button matTreeNodeToggle>
              <mat-icon class="mat-icon-rtl-mirror">
                {{
                  treeControl.isExpanded(node) ? "expand_more" : "chevron_right"
                }}
              </mat-icon>
            </button>
          </div>
        </div>
        <div
          class="nav-pills"
          [class.tree-invisible]="!treeControl.isExpanded(node)"
        >
          <ng-container matTreeNodeOutlet></ng-container>
        </div>
      </mat-nested-tree-node>
    </mat-tree>
  </div>
  <div class="col-xl-6 col-sm-12">
    <str-tree-item-edit
      *ngIf="editItem$ | async as editItem"
      [item]="editItem"
      (cancel)="editItem$.next(null)"
    ></str-tree-item-edit>
  </div>
</div>
